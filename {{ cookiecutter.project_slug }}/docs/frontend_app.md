# Frontend App

## Overview

The 'Frontend App' uses [Vite](https://vite.dev/) with [TypeScript](https://www.typescriptlang.org).

To learn React, check out the [React documentation](https://react.dev/).


## Running the dev server on your host machine

If you have `npm` installed on your host machine, you can start the dev server
by running `npm start`:

```
$ cd frontend_app
$ npm run start
```

You can then access the dev server at http://localhost:3000

The page will reload if you make edits. You will also see any lint errors in
the console.

## Formatting

To run the [prettier](https://prettier.io) formatter:

```
$ npm run prettier
```

## Creating a Production-Ready Build

A production-ready build of the frontend app is automatically generated by the
Ansible provisioning. This is an optimised and minified build that is ready to
be deployed.

If you want to see this build in action in the Podman dev environment, run:

```
./provision_dev_environment.sh
```

and visit https://localhost:5000 where it is being  served via NGINX on the 
'frontend' podman container.

## Serving in Production

The production build of the frontend app is served with NGINX.

NGINX has been configured to redirect http requests to https. The contents of
`build/static/` are served as regular files, with all other urls served using
`index.html` if no file with a matching name is found.

NGINX has also been configured to serve the frontend app with 
[Content-Security-Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)
headers as an added layer of security. The CSP header is set to only allow content
from the site's own origin. With this configuration, any other scripts will be
ignored by CSP-supporting browsers (e.g.: inline scripts, inline event handlers). 
